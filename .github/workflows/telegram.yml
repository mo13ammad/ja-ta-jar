name: Notifcation For Dev Branch

on:
  push:
    branches:
      - ondev

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      
          
      - name: Send Telegram Notification
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          COMMIT_MESSAGE: ${{ github.event.head_commit.message }}  # پیام کامیت
          AUTHOR_NAME: ${{ github.event.head_commit.author.name }}  # نام نویسنده
          REPO_URL: "https://github.com/${{ github.repository }}"
          COMMIT_URL: "https://github.com/${{ github.repository }}/commit/${{ github.sha }}"

        run: |
          MESSAGE="✅ <b>برنچ Dev  فرانت جات آجار به‌روز شد!</b> 📝 <b>کامیت:</b> <code>${COMMIT_MESSAGE}</code> 👤 <b>نویسنده:</b> ${AUTHOR_NAME} 🔗 <a href=\"${REPO_URL}\">لینک به مخزن</a> 🔗 <a href=\"${COMMIT_URL}\">لینک به کامیت</a>"

          curl -X POST "https://api.telegram.org/bot$TELEGRAM_BOT_TOKEN/sendMessage" \
            -d "chat_id=$TELEGRAM_CHAT_ID&text=$MESSAGE" -d "parse_mode=HTML"
