name: Notifcation For Dev Branch

on:
  push:
    branches:
      - ondev

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      
          
      - name: Send Telegram Notification
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          COMMIT_MESSAGE: ${{ github.event.head_commit.message }}  # Ù¾ÛŒØ§Ù… Ú©Ø§Ù…ÛŒØª
          AUTHOR_NAME: ${{ github.event.head_commit.author.name }}  # Ù†Ø§Ù… Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡
          REPO_URL: "https://github.com/${{ github.repository }}"
          COMMIT_URL: "https://github.com/${{ github.repository }}/commit/${{ github.sha }}"

        run: |
          MESSAGE="âœ… <b>Ø¨Ø±Ù†Ú† Dev  ÙØ±Ø§Ù†Øª Ø¬Ø§Øª Ø¢Ø¬Ø§Ø± Ø¨Ù‡â€ŒØ±ÙˆØ² Ø´Ø¯!</b> ğŸ“ <b>Ú©Ø§Ù…ÛŒØª:</b> <code>${COMMIT_MESSAGE}</code> ğŸ‘¤ <b>Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡:</b> ${AUTHOR_NAME} ğŸ”— <a href=\"${REPO_URL}\">Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ù…Ø®Ø²Ù†</a> ğŸ”— <a href=\"${COMMIT_URL}\">Ù„ÛŒÙ†Ú© Ø¨Ù‡ Ú©Ø§Ù…ÛŒØª</a>"

          curl -X POST "https://api.telegram.org/bot$TELEGRAM_BOT_TOKEN/sendMessage" \
            -d "chat_id=$TELEGRAM_CHAT_ID&text=$MESSAGE" -d "parse_mode=HTML"
